(self.webpackChunkdocusaurus_test=self.webpackChunkdocusaurus_test||[]).push([[5581],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return s},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||p[m]||i;return n?a.createElement(h,o(o({ref:t},s),{},{components:n})):a.createElement(h,o({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,o[1]=c;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4065:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return c},metadata:function(){return l},toc:function(){return u},default:function(){return p}});var a=n(2122),r=n(9756),i=(n(7294),n(3905)),o=["components"],c={sidebar_position:7},l={unversionedId:"setup",id:"setup",isDocsHomePage:!1,title:"Setup and Usage",description:"In this section we will walk through how to set up an admin account and generate",source:"@site/docs/setup.md",sourceDirName:".",slug:"/setup",permalink:"/docs/setup",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/setup.md",version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Deployment",permalink:"/docs/deployment"},next:{title:"Authentication Scenarios",permalink:"/docs/auth_scenarios"}},u=[{value:"Admin Creation",id:"admin-creation",children:[{value:"Create Admin Account",id:"create-admin-account",children:[]},{value:"Create Admin Credentials",id:"create-admin-credentials",children:[]},{value:"Create Admin Application",id:"create-admin-application",children:[]},{value:"Generate an API Key",id:"generate-an-api-key",children:[]},{value:"Create Auth Client",id:"create-auth-client",children:[]},{value:"Create Other Users",id:"create-other-users",children:[]},{value:"Authenticate a User",id:"authenticate-a-user",children:[]}]}],s={toc:u};function p(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"In this section we will walk through how to set up an admin account and generate\nan API key to be able to call AuthGuard. Then we will show few examples of common\nuse cases."),(0,i.kt)("h2",{id:"admin-creation"},"Admin Creation"),(0,i.kt)("p",null,"After building your own distribution, or getting one of the standard ones, you\nneed to to create an admin account, an admin application, and generate an API\nfor that application. You can use the ",(0,i.kt)("a",{parentName:"p",href:"/docs/deployment#One-Time-Admin"},"OTA")," to do\nthat for the first time, then use the API key to create more if needed."),(0,i.kt)("h3",{id:"create-admin-account"},"Create Admin Account"),(0,i.kt)("p",null,"Make a POST request to /accounts"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "roles": [\n        "authguard_admin"\n    ]\n}\n')),(0,i.kt)("h3",{id:"create-admin-credentials"},"Create Admin Credentials"),(0,i.kt)("p",null,"Make a POST request to /credentials"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "accountId": "{{admin_account_id}}",\n    "identifiers": [\n        {\n            "identifier": "{{admin_username}}",\n            "type": "USERNAME"\n        }\n    ],\n    "plainPassword": "{{admin_password}}"\n}\n')),(0,i.kt)("h3",{id:"create-admin-application"},"Create Admin Application"),(0,i.kt)("p",null,"Make a POST request to /apps"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "Your application name",\n    "accountId": "{{admin_account_id}}",\n    "roles": [\n        "authguard_admin_client"\n    ]\n}\n')),(0,i.kt)("h3",{id:"generate-an-api-key"},"Generate an API Key"),(0,i.kt)("p",null,"Make a POST request to /keys"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "appId": "{{admin_app_id}}"\n}\n')),(0,i.kt)("h3",{id:"create-auth-client"},"Create Auth Client"),(0,i.kt)("p",null,"Unlike the admin application we just created, an auth application can only\naccess a limited number of endpoints. Auth clients have keys which can be\nmade public if you needed your application to communicate with AuthGuard\ndirectly to register users and log them in. "),(0,i.kt)("p",null,"Make a POST request to /apps"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "Your application name",\n    "accountId": "{{admin_account_id}}",\n    "roles": [\n        "authguard_auth_client"\n    ]\n}\n')),(0,i.kt)("p",null,"And then generate an API key just like the previous step. The only\nendpoints this client will have access to are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"POST ",(0,i.kt)("inlineCode",{parentName:"li"},"/credentials")),(0,i.kt)("li",{parentName:"ul"},"GET ",(0,i.kt)("inlineCode",{parentName:"li"},"/credentials/identifier/{identifier}/exists")),(0,i.kt)("li",{parentName:"ul"},"POST ",(0,i.kt)("inlineCode",{parentName:"li"},"/accounts")," (all phone numbers and emails will be set to unverified if the ",(0,i.kt)("inlineCode",{parentName:"li"},"verified")," flag was set to true)"),(0,i.kt)("li",{parentName:"ul"},"GET ",(0,i.kt)("inlineCode",{parentName:"li"},"/accounts/email/{email}/exists")),(0,i.kt)("li",{parentName:"ul"},"POST ",(0,i.kt)("inlineCode",{parentName:"li"},"/auth/exchange")),(0,i.kt)("li",{parentName:"ul"},"POST ",(0,i.kt)("inlineCode",{parentName:"li"},"/auth/authenticate")),(0,i.kt)("li",{parentName:"ul"},"POST ",(0,i.kt)("inlineCode",{parentName:"li"},"/credentials/reset_token")),(0,i.kt)("li",{parentName:"ul"},"POST ",(0,i.kt)("inlineCode",{parentName:"li"},"/credentials/reset"))),(0,i.kt)("h3",{id:"create-other-users"},"Create Other Users"),(0,i.kt)("p",null,"Creating a user is just like creating an admin user, except that the account\nwill not have the admin role. Every user will have two entities associated\nwith it: credentials and account. You first create the account, then the\ncredentials."),(0,i.kt)("p",null,"Since we showed already an example above, you can check the API documentation\nfor ",(0,i.kt)("a",{parentName:"p",href:"/api#operation/createAccount"},"POST /accounts")," and\n",(0,i.kt)("a",{parentName:"p",href:"/api#operation/createCredentials"},"POST /credentials"),"."),(0,i.kt)("h3",{id:"authenticate-a-user"},"Authenticate a User"),(0,i.kt)("p",null,"In order to authenticate user, you can use either the exchange endpoint, or\nthe authenticate endpoint. The authenticate endpoint is just a shortcut for\nperforming an exchange from basic (username and password) to whatever it is\nconfigured to generate. In this example we will use the authenticate endpoint,\nwhere you perform a POST request to /auth/authenticate"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "identifier": "username",\n    "password": "password"\n}\n')),(0,i.kt)("p",null,"The auth request takes more parameters. You can know more from the ",(0,i.kt)("a",{parentName:"p",href:"/api"},"API\ndocumentation"),"."))}p.isMDXComponent=!0}}]);