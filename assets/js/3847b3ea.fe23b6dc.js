(self.webpackChunkdocusaurus_test=self.webpackChunkdocusaurus_test||[]).push([[581],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return l},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,u=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=s(n),m=r,h=p["".concat(u,".").concat(m)]||p[m]||d[m]||i;return n?a.createElement(h,o(o({ref:t},l),{},{components:n})):a.createElement(h,o({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=e,c.mdxType="string"==typeof e?e:r,o[1]=c;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},4065:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return c},metadata:function(){return u},toc:function(){return s},default:function(){return d}});var a=n(2122),r=n(9756),i=(n(7294),n(3905)),o=["components"],c={sidebar_position:7},u={unversionedId:"setup",id:"setup",isDocsHomePage:!1,title:"Setup and Usage",description:"In this section we will walk through how to set up an admin account and generate",source:"@site/docs/setup.md",sourceDirName:".",slug:"/setup",permalink:"/docs/setup",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/setup.md",version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Deployment",permalink:"/docs/deployment"},next:{title:"Authentication Scenarios",permalink:"/docs/auth_scenarios"}},s=[{value:"Admin Creation",id:"admin-creation",children:[{value:"Create Admin Account",id:"create-admin-account",children:[]},{value:"Create Admin Credentials",id:"create-admin-credentials",children:[]},{value:"Create Admin Application",id:"create-admin-application",children:[]},{value:"Generate an API Key",id:"generate-an-api-key",children:[]},{value:"Create Other Users",id:"create-other-users",children:[]},{value:"Authenticate a User",id:"authenticate-a-user",children:[]}]}],l={toc:s};function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"In this section we will walk through how to set up an admin account and generate\nan API key to be able to call AuthGuard. Then we will show few examples of common\nuse cases."),(0,i.kt)("h2",{id:"admin-creation"},"Admin Creation"),(0,i.kt)("p",null,"After building your own distribution, or getting one of the standard ones, you\nneed to to create an admin account, an admin application, and generate an API\nfor that application. You can use the ",(0,i.kt)("a",{parentName:"p",href:"/docs/deployment#One-Time-Admin"},"OTA")," to do\nthat for the first time, then use the API key to create more if needed."),(0,i.kt)("h3",{id:"create-admin-account"},"Create Admin Account"),(0,i.kt)("p",null,"Create a POST request to /accounts"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "roles": [\n        "authguard_admin"\n    ]\n}\n')),(0,i.kt)("h3",{id:"create-admin-credentials"},"Create Admin Credentials"),(0,i.kt)("p",null,"Create a POST request to /credentials"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "accountId": "{{admin_account_id}}",\n    "identifiers": [\n        {\n            "identifier": "{{admin_username}}",\n            "type": "USERNAME"\n        }\n    ],\n    "plainPassword": "{{admin_password}}"\n}\n')),(0,i.kt)("h3",{id:"create-admin-application"},"Create Admin Application"),(0,i.kt)("p",null,"Create a POST request to /apps"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "Your application name",\n    "accountId": "{{admin_account_id}}",\n    "roles": [\n        "authguard_admin_client"\n    ]\n}\n')),(0,i.kt)("h3",{id:"generate-an-api-key"},"Generate an API Key"),(0,i.kt)("p",null,"Create a POST request to /keys"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "appId": "{{admin_app_id}}"\n}\n')),(0,i.kt)("h3",{id:"create-other-users"},"Create Other Users"),(0,i.kt)("p",null,"Creating a user is just like creating an admin user, except that the account\nwill not have the admin role. Every user will have two entities associated\nwith it: credentials and account. You first create the account, then the\ncredentials."),(0,i.kt)("p",null,"Since we showed already an example above, you can check the API documentation\nfor ",(0,i.kt)("a",{parentName:"p",href:"/api#operation/createAccount"},"POST /accounts")," and\n",(0,i.kt)("a",{parentName:"p",href:"/api#operation/createCredentials"},"POST /credentials"),"."),(0,i.kt)("h3",{id:"authenticate-a-user"},"Authenticate a User"),(0,i.kt)("p",null,"In order to authenticate user, you can use either the exchange endpoint, or\nthe authenticate endpoint. The authenticate endpoint is just a shortcut for\nperforming an exchange from basic (username and password) to whatever it is\nconfigured to generate. In this example we will use the authenticate endpoint,\nwhere you perform a POST request to /auth/authenticate"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "identifier": "username",\n    "password": "password"\n}\n')),(0,i.kt)("p",null,"The auth request takes more parameters. You can learn more on the API\ndocumentation"))}d.isMDXComponent=!0}}]);