<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="AuthGuard Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="AuthGuard Documentation Blog Atom Feed"><title data-react-helmet="true">Bootstrap Steps | AuthGuard Documentation</title><meta data-react-helmet="true" property="og:url" content="https://authguard.github.io/docs/extend/bootstrap"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Bootstrap Steps | AuthGuard Documentation"><meta data-react-helmet="true" name="description" content="AuthGuard can run certain steps before starting the server, those are called &quot;bootstrap steps&quot;."><meta data-react-helmet="true" property="og:description" content="AuthGuard can run certain steps before starting the server, those are called &quot;bootstrap steps&quot;."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://authguard.github.io/docs/extend/bootstrap"><link data-react-helmet="true" rel="alternate" href="https://authguard.github.io/docs/extend/bootstrap" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://authguard.github.io/docs/extend/bootstrap" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.73b2fc11.css">
<link rel="preload" href="/assets/js/runtime~main.a6b9e398.js" as="script">
<link rel="preload" href="/assets/js/main.169f3be6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/reduced_authguard_logo.png" alt="AuthGuard" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/reduced_authguard_logo.png" alt="AuthGuard" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">AuthGuard</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/api">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/authguard/AuthGuard" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/reduced_authguard_logo.png" alt="AuthGuard" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/reduced_authguard_logo.png" alt="AuthGuard" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">AuthGuard</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/api">API</a></li><li class="menu__list-item"><a href="https://github.com/authguard/AuthGuard" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">AuthGuard</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/features">Features</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/run">Running AuthGuard</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/design">Design</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Extensions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extend/extend">Extending AuthGuard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extend/exchange">Exchange Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extend/dal">Data Access Layer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extend/messaging">Event Subscribers</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/extend/bootstrap">Bootstrap Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/extend/routes">API Routes</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Extensions Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extend/cases/kafka">Bridge to Kafka</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extend/cases/api-keys">Generating Custom API Keys</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/deployment">Deployment</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/setup">Setup and Usage</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/auth_scenarios">Authentication Scenarios</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adminstration">Server Administration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/federation">Identity Federation</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Bootstrap Steps</h1></header><div class="markdown"><p>AuthGuard can run certain steps before starting the server, those are called &quot;bootstrap steps&quot;.
There are no restrictions on what those steps can do. For example, they can just log a message, connect
to an external service, or create database indices.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-a-step"></a>Creating a Step<a class="hash-link" href="#creating-a-step" title="Direct link to heading">#</a></h2><p>All you need to do is to create a class which implements <code>BootstrapStep</code> interface, and
your class will be discovered automatically.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class CustomStep implements BootstrapStep {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void run() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // add the logic of your step here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Steps are initialized after configuration and all dynamic bindings are initialized, and
just like other extensions, they can have access to their own configuration or inject
some of the services. For example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@Inject</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public CustomStep(RolesService rolesService, @Named(&quot;custom&quot;) ConfigContext customStepConfig) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // do something with the service and the config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="implementation-guidelines"></a>Implementation Guidelines<a class="hash-link" href="#implementation-guidelines" title="Direct link to heading">#</a></h2><p>While there are no restrictions what steps can do, there are certain guidelines that you
need to be aware of</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="independence"></a>Independence<a class="hash-link" href="#independence" title="Direct link to heading">#</a></h3><p>Steps are completely independent and cannot be dependent on other steps. In other words,
a step cannot accept another step in the constructor and the order of execution is not
guaranteed either.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="idempotency"></a>Idempotency<a class="hash-link" href="#idempotency" title="Direct link to heading">#</a></h3><p>Steps with side effects should be idempotent since they&#x27;ll run every time AuthGuard
is restarted.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="concurrency"></a>Concurrency<a class="hash-link" href="#concurrency" title="Direct link to heading">#</a></h3><p>Unless necessary, steps should not return before all of their tasks are done. They should
not schedule something in the background.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="failure"></a>Failure<a class="hash-link" href="#failure" title="Direct link to heading">#</a></h3><p>Exceptions thrown by steps are logged and they will not prevent the server from starting.
For fatal failures that should halt the server a step may just force the process to
terminate. This will be replaced in the future with a halt signal that makes the application
shut down gracefully.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/extend/bootstrap.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/extend/messaging"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Event Subscribers</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/extend/routes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Routes Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-a-step" class="table-of-contents__link">Creating a Step</a></li><li><a href="#implementation-guidelines" class="table-of-contents__link">Implementation Guidelines</a><ul><li><a href="#independence" class="table-of-contents__link">Independence</a></li><li><a href="#idempotency" class="table-of-contents__link">Idempotency</a></li><li><a href="#concurrency" class="table-of-contents__link">Concurrency</a></li><li><a href="#failure" class="table-of-contents__link">Failure</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Links</h4><ul class="footer__items"><li class="footer__item"><a href="https://nexblocks.com/nexblocks" target="_blank" rel="noopener noreferrer" class="footer__link-item">nex::blocks</a></li><li class="footer__item"><a href="https://nexblocks.com/nexblocks/portal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Licenses</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 nex::blocks. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a6b9e398.js"></script>
<script src="/assets/js/main.169f3be6.js"></script>
</body>
</html>