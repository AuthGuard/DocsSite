<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="AuthGuard Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="AuthGuard Documentation Blog Atom Feed"><title data-react-helmet="true">Identity Federation | AuthGuard Documentation</title><meta data-react-helmet="true" property="og:url" content="https://authguard.github.io/docs/federation"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Identity Federation | AuthGuard Documentation"><meta data-react-helmet="true" name="description" content="Federation and Social Login/Signup are still experimental"><meta data-react-helmet="true" property="og:description" content="Federation and Social Login/Signup are still experimental"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://authguard.github.io/docs/federation"><link data-react-helmet="true" rel="alternate" href="https://authguard.github.io/docs/federation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://authguard.github.io/docs/federation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.73b2fc11.css">
<link rel="preload" href="/assets/js/runtime~main.770a3aa6.js" as="script">
<link rel="preload" href="/assets/js/main.baf11f6d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/reduced_authguard_logo.png" alt="AuthGuard" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/reduced_authguard_logo.png" alt="AuthGuard" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">AuthGuard</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/api">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/authguard/AuthGuard" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/reduced_authguard_logo.png" alt="AuthGuard" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/reduced_authguard_logo.png" alt="AuthGuard" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">AuthGuard</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/api">API</a></li><li class="menu__list-item"><a href="https://github.com/authguard/AuthGuard" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">AuthGuard</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/features">Features</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/run">Running AuthGuard</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/design">Design</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Extensions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extend/extend">Extending AuthGuard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extend/exchange">Exchange Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extend/dal">Data Access Layer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extend/messaging">Event Subscribers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extend/bootstrap">Bootstrap Steps</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/deployment">Deployment</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/setup">Setup and Usage</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/auth_scenarios">Authentication Scenarios</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adminstration">Server Administration</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/federation">Identity Federation</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Identity Federation</h1></header><div class="markdown"><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Experimental Features</h5></div><div class="admonition-content"><p>Federation and Social Login/Signup are still experimental
features and may not be ready for production use yet.</p></div></div><p>Beside being a full identity managenet service, AuthGuard also
supports authentication users which are not managed by it directly.
AuthGuard is compatible with: any standard LDAP implementation, and
any OpenID Connect (OIDC) service. OIDC is what most social login
providers, such as Google and Facebook, support.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ldap"></a>LDAP<a class="hash-link" href="#ldap" title="Direct link to heading">#</a></h2><p>AuthGuard can connect to an LDAP server to authenticate users. In
such scenarios, the LDAP server will be the identity provider,
while AuthGuard will handle only the user tokens or sessions. </p><p>Before starting, you need to make sure that the LDAP extension
is available as part of your distribution. Standard distributions
do not include LDAP support, so you will need a custom one. This
will change when the LDAP is no longer an experimental feature.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuration"></a>Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">ldap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .. the server host ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .. the server port ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">secure</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># should be true for production use</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">admin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the admin account AuthGuard can use to communicate with the LDAP server</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">adminPassword</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the password of the admin account</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">adminBindFormat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;cn=%s&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the format to use to bind the admin account, %s is a placeholder for the username</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">baseDN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ou=people,dc=example,dc=com&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the base DN to use to search for users</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">searchAttribut</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uid&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the attribute to get use to search for the username</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">passwordAttribute</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;userPassword&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the attribute which has the password</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">bindType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;simple&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the bind type to use (simple, cram_md5, digest_md5, or plain)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="exchanges"></a>Exchanges<a class="hash-link" href="#exchanges" title="Direct link to heading">#</a></h3><p>Just like all other authentication options, LDAP authentication
is just an exchange. The extension defines the following exchanges:</p><ul><li>LDAP to Access Token</li><li>LDAP to Authorization Code</li><li>LDAP to ID Token</li><li>LDAP to Session</li><li>LDAP to OTP</li><li>LDAP to Passwordless</li></ul><p>All of them are available through <code>/auth/exchange</code> endpoint. You
can check the <a href="/api">OpenAPI documentation</a> on how to use it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="social-login"></a>Social Login<a class="hash-link" href="#social-login" title="Direct link to heading">#</a></h2><p>Most, if not all, of social login providers support OAuth 2.0 and
OpenID Connect. AuthGuard does not have a provider-specific
implementation, instead you can configure it to connect to any
of them.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuration-1"></a>Configuration<a class="hash-link" href="#configuration-1" title="Direct link to heading">#</a></h3><p>As we mentioned, you can configure AuthGuard to use any OpenID
Connect provider, and you do by defining a client for it.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">oauth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">clients</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">provider</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .. the name of the provider</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> this can be anything to identify it ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">authUrl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .. the auth URL of the provider ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">tokenUrl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .. the token URL of the provider ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">authRedirectUrl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .. the URL to tell the provider to redirect to after the auth step ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">tokenRedirectUrl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .. the URL to tell the provider to redirect to after the token step ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">clientId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .. the client ID registered with the provider ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">clientSecret</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .. the client secret registered with the provider ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">defaultScopes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;openid&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;profile&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># the scopes to request from the provder</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="flow"></a>Flow<a class="hash-link" href="#flow" title="Direct link to heading">#</a></h3><p>There are steps to this flow: 1. get an authorization URL, 2. exchange
the authorization code for valid tokens.</p><p>First you need to request the authorization URL from AuthGuard
by sending a GET request to <code>/oauth/auth_url</code> with the query
parameter <code>provider</code> set to one of the providers you defined
in the configuration. AuthGuard will take care of creating the
session state value to be used for interacting with the OAuth
server.</p><p>Once your client gets the URL, it should redirect the user to
that URL to perform the authentication. If that step was successful,
then the OAuth server will redirect the user back to your application
with the authorization code. You then send a POST request to
<code>/oauth/authorize</code> with the name of the provider, the state, and
the authorization code. AuthGuard will then exchange the code
for the tokens from the provider and pass them back to your
application.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/federation.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/adminstration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Server Administration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ldap" class="table-of-contents__link">LDAP</a><ul><li><a href="#configuration" class="table-of-contents__link">Configuration</a></li><li><a href="#exchanges" class="table-of-contents__link">Exchanges</a></li></ul></li><li><a href="#social-login" class="table-of-contents__link">Social Login</a><ul><li><a href="#configuration-1" class="table-of-contents__link">Configuration</a></li><li><a href="#flow" class="table-of-contents__link">Flow</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Links</h4><ul class="footer__items"><li class="footer__item"><a href="https://nexblocks.com/nexblocks" target="_blank" rel="noopener noreferrer" class="footer__link-item">nex::blocks</a></li><li class="footer__item"><a href="https://nexblocks.com/nexblocks/portal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Licenses</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 nex::blocks. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.770a3aa6.js"></script>
<script src="/assets/js/main.baf11f6d.js"></script>
</body>
</html>